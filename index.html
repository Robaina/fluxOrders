<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="An interactive graph of the flux order relations of Escherichia coli">
  <meta name="keywords" content="Flux order relations, Escherichia coli, Metabolic modelling">
  <meta name="author" content="Semidán Robaina Estévez">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Flux Orders</title>
  <link rel="icon" type="image/png" sizes="32x32" href="imgs/favicon-32x32.ico">

  <script src="libs/cytoscape.js"></script>
  <script src="libs/dagre.js"></script>
  <script src="libs/cytoscape-dagre.js"></script>
  <script src="libs/jquery-3.3.1.min.js"></script>
  <script src="libs/plotly-latest.min.js"></script>
  <link rel="stylesheet" href="styles.css">

  <!-- Sets $ as inline MathJax symbols -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
    });
  </script>

  <!-- Allows MathJax in the document: Note configuration changed to "SVG to avoid interference with plot.ly which renders in SVG"  TeX-MML-AM_CHTML TeX-AMS_SVG-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=default" async></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131412021-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-131412021-1');
  </script>

</head>

<body>

  <h1 style="text-align: center;">Flux order relations of <em>Escherichia coli</em></h1>
  <form id="reaction-form">
    <p id="form-reaction">Current reaction: </p>
    <select name="reactions" id="select-list" onchange="changeSelectedReaction()">
    </select>
  </form>

  <div class="graph" id="cy"></div>

  <div id="plotContainer">
    <p id="plot-title">Metabolic subsystems</p>
    <div id="barChart"></div>
  </div>

  <button class="button" id="about-button" onclick="showAbout()">About</button>
  <div class="about-container" id="about">
    <h2 style="text-align: center;">The flux order relation</h2>

      <p>The following <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic graph (DAG)</a> represents the <a href="https://en.wikipedia.org/wiki/Partially_ordered_set">partially ordered set</a> induced by the flux order relation in a core metabolic network of <i>Escherichia coli</i>. In other words, this is the <a href="https://en.wikipedia.org/wiki/Hasse_diagram">Hasse diagram</a> of the partially (flux) order set.</p>

      <p>Two reactions $r_i, r_j$ are flux-ordered if their fluxes satisfy $$ v_i \geq v_j \; ∀ v : Sv = 0, v_{min} \leq v \leq v_{max} $$ where $S$ corresponds to the stoichiometric matrix of the metabolic network, $v$ a vector of flux values for every reaction in the system and $v_{min}, v_{max}$ corresponds to the boundary flux values of the system &mdash; a typical convention in <a href="https://en.wikipedia.org/wiki/Flux_balance_analysis">constraint-based metabolic modeling</a>. Hence, a flux-ordered reaction pair satisfies the order relation in any steady-state of the system.</p>

      <p>In this graph, nodes are biochemical reactions while (directed) edges represent the flux order relation, <i>i.e.</i>, and edge $v_i → v_j$ implies $v_i \geq v_j$. The current selected node is green-colored and the name of the biochemical reaction depicted above the graph. All parent reactions of the selected node, <i>i.e.</i>, all reactions with an equal or greater flux value than the selected node, are colored in pink, while all children reactions, <i>i.e.</i>, all reactions with an equal or lower flux value, are colored in purple. The selected reaction can be changed by searching for the reaction name in the drop list or by directly clicking or touching a node. Mouse-hovering on nodes displays the full reaction name instead of the default reaction identifier. The graph admits zoom in, zoom out and drag events like any <a href="http://js.cytoscape.org/">Cytoscape.js</a> graph.</p>

      <p>The bar plot represents the number of reactions per metabolic subsystem in the sets of parent and children reactions in the selected node. Reactions with a higher number of children reactions tend to be associated to critical subsystems such as ATP production or nutrient exchange.</p>

      <p>This interactive graph is part of the publication <a href="#"><i>Flux-based hierarchical organization of </i>Escherichia coli<i>'s metabolic network</i></a> by Semidán Robaina-Estévez and Zoran Nikoloski.</p>

    </p>
  </div>

  <footer>
    <p>Semidán Robaina Estévez, 2018</p>
    <p>Using <a href="http://js.cytoscape.org/">Cytoscape.js</a>, <a href="https://plot.ly/javascript/">Plotly.js</a> and <a href="https://github.com/dagrejs/dagre">Dagre.js</a></p>
  </footer>

  <script src="data/graphLayoutOptions.js"></script>
  <script src="data/graphData.js"></script>
  <script src="data/graphStyle.js"></script>
  <script src="data/barPlot.js"></script>
  <script src="sketch.js"></script>

  <a href="https://www.github.com/Robaina/fluxOrders" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;"
      aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;"
        class="octo-arm"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
        fill="currentColor" class="octo-body"></path>
    </svg></a>
  <style>
    .github-corner:hover .octo-arm {
      animation: octocat-wave 560ms ease-in-out
    }

    @keyframes octocat-wave {

      0%,
      100% {
        transform: rotate(0)
      }

      20%,
      60% {
        transform: rotate(-25deg)
      }

      40%,
      80% {
        transform: rotate(10deg)
      }
    }

    @media (max-width:500px) {
      .github-corner:hover .octo-arm {
        animation: none
      }

      .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out
      }
    }
  </style>

</body>

</html>
